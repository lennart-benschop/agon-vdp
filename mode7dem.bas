   10 REM Program to demonstrate MODE 7 emulator
   20 :
   30 ON ERROR ON ERROR OFF:MODE 3:IF ERR=25 PRINT "Mode 7 emulator not loaded":END ELSE REPORT:PRINT" at line ";ERL:END
   40 :
   50 MODE 7
   80 :
   90 file% = OPENIN"MODE7DEM.CAR"
  100 IF file%=0 MODE 3:PRINT "File MODE7DEM.CAR not found":END
  110 :
  120 REPEAT
  130   CLS : FOR N%=1 TO 960:VDU (128 OR BGET#file%):NEXT
  140   IF EOF#file% THEN PTR#file%=0
  150   PRINT TAB(0,24)" Press R to reveal, C to conceal "TAB(0,0);
  160   REPEAT
  170     C%=ASC(GET$(POS,VPOS))
  180     X%=POS:Y%=VPOS:PRINT TAB(37,24);RIGHT$("0"+STR$~C%,2);TAB(X%,Y%);
  190     K%=INKEY(1000)
  200     IF K%=82 PROCreveal ELSE IF K%=67 PROCconceal
  210     IF K%=8 THEN VDU8 ELSEIF K%=21 THEN VDU9 ELSEIF K%=10 THEN VDU10 ELSEIF K%=11 THEN VDU11
  220   UNTIL K%=13 OR K%=-1
  230 UNTIL FALSE
  240 ;
  250 DEF PROCreveal:X%=POS:Y%=VPOS:VDU30:FOR N%=1 TO 24*40
  260   IF ASC(GET$(POS,VPOS))=&98 VDU &9B ELSE VDU 9
  270 NEXT:PRINT TAB(X%,Y%);:ENDPROC
  280 ;
  290 DEF PROCconceal:X%=POS:Y%=VPOS:VDU30:FOR N%=1 TO 24*40
  300   IF ASC(GET$(POS,VPOS))=&9B VDU&98 ELSE VDU 9
  310 NEXT:PRINT TAB(X%,Y%);:ENDPROC
